<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Poongrae-Day Calendar</title>
    <style>
      @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");

      :root {
        --primary-color: #ff8f56; /* ì§„í•œ ì˜¤ë Œì§€ (ì˜¤í”ˆ ì „ ë°°ê²½) */
        --card-bg: #ffece1; /* ì—°í•œ ì‚´êµ¬ìƒ‰ (ì˜¤í”ˆ í›„ ë°°ê²½) */
        --text-color: #ff763b; /* í…ìŠ¤íŠ¸ì»¬ëŸ¬ */
      }

      body {
        font-family: "Pretendard", "Noto Sans KR", sans-serif;
        background-image: url("https://res.cloudinary.com/dkqqxjsek/image/upload/v1767002360/Frame_84_bh88ll.png");
        background-size: cover;
        background-position: center top;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-color: #fcfcfc;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: #333;
        overflow-x: hidden;
      }

      /* --- í—¤ë” --- */
      header {
        width: 100%;
        max-width: 420px;
        padding: 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 10;
      }

      .top-nav {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .event-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        background: white;
        border: none;
        box-shadow: 0px 2px 8px rgba(163, 73, 27, 0.15);
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        color: var(--primary-color);
        cursor: pointer;
        text-decoration: none;
        width: 155px;
        height: 33px;
        box-sizing: border-box;
      }

      .btn-icon {
        width: 14px;
        height: 14px;
        object-fit: contain;
      }
      .nav-icons {
        display: flex;
        gap: 15px;
        align-items: center;
      }
      .nav-icon {
        width: 24px;
        height: 24px;
        object-fit: contain;
        cursor: pointer;
      }

      /* --- íƒ€ì´í‹€ --- */
      .logo-area {
        text-align: center;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .title-image {
        width: 145px;
        height: 96px;
        object-fit: contain;
        display: block;
        margin-bottom: 10px;
        max-width: 100%;
      }

      .sub-title {
        font-size: 15px;
        font-weight: 600;
        color: #564343;
        letter-spacing: -0.5px;
        margin: 0;
        text-transform: uppercase;
      }

      /* --- ìº˜ë¦°ë” ê·¸ë¦¬ë“œ --- */
      .calendar-container {
        display: grid;
        grid-template-columns: repeat(2, 130px);
        justify-content: center;
        gap: 15px;
        width: 100%;
        max-width: 380px;
        margin-bottom: 40px;
        z-index: 1;
      }

      .door {
        width: 100%;
        height: 150px;
        perspective: 1000px;
        cursor: pointer;
        position: relative;
      }

      .door-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
      }

      .door.open .door-inner {
        transform: rotateY(180deg);
      }

      /* --- ì¹´ë“œ ì•/ë’¤ ê³µí†µ --- */
      .door-front,
      .door-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        border-radius: 12px;
        overflow: hidden;
        box-sizing: border-box;
        padding: 15px;
      }

      /* --- [State 1] ì˜¤í”ˆ ì „ (Front) --- */
      .door-front {
        background-color: var(--primary-color);
        color: white;
      }

      .door-front .door-num {
        font-size: 16px;
        font-weight: 600;
        color: white;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
      }

      .cover-image {
        width: 80%;
        height: auto;
        object-fit: contain;
        align-self: center;
        margin-top: 10px;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      /* --- [State 2] ì˜¤í”ˆ í›„ (Back) --- */
      .door-back {
        background-color: var(--card-bg);
        transform: rotateY(180deg);
        border: none;
      }

      .door-back .door-num {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
      }

      .puzzle-image {
        width: 70%;
        height: auto;
        object-fit: contain;
        align-self: center;
        margin-top: 5px;
      }

      /* --- [State 3] ì ê¹€ ìƒíƒœ (Overlay) --- */
      .door.missed .door-front {
        background-color: var(--primary-color);
      }

      .lock-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 24px;
        height: 28px;
        z-index: 10;
        opacity: 0.9;
        object-fit: contain;
      }

      .door.missed .cover-image {
        opacity: 0.3;
      }

      .door:not(.missed):hover .door-front {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      /* Day 10 ë³„ ì•„ì´ì½˜ ì²˜ë¦¬ [ìˆ˜ì •: ì¤‘ì•™ ì •ë ¬] */
      .door-num-10-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 30px;
        margin-bottom: 5px;
      }
      .star-icon {
        width: 30px;
        height: 30px;
        position: absolute;
        /* [ìˆ˜ì •] ë³„ ì•„ì´ì½˜ ì¤‘ì•™ ì •ë ¬ */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .door-num-10-wrapper span {
        position: relative;
        z-index: 1;
        font-size: 0.8rem;
        font-weight: 600;
        /* [ìˆ˜ì •] ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ margin-top ì œê±° ë° padding ë¯¸ì„¸ ì¡°ì • */
        margin: 0;
        padding-top: 1px;
      }
      /* ì•ë©´: ì£¼í™©ìƒ‰ ìˆ«ì */
      .door-front .door-num-10-wrapper span {
        color: var(--primary-color);
      }
      /* ë’·ë©´: í°ìƒ‰ ìˆ«ì */
      .door-back .door-num-10-wrapper span {
        color: white;
      }

      /* --- í‘¸í„° & ëª¨ë‹¬ CSS --- */
      footer {
        margin-bottom: 40px;
        z-index: 10;
      }
      .footer-link {
        color: var(--primary-color);
        text-decoration: underline;
        font-size: 0.9rem;
        font-weight: 500;
        text-underline-offset: 4px;
        cursor: pointer;
      }

      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        backdrop-filter: blur(2px);
      }
      .modal.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content.daily-modal {
        background: var(--primary-color);
        padding: 20px;
        border-radius: 12px;
        text-align: left;
        width: 295px;
        height: 422px;
        position: relative;
        transform: scale(0.9);
        transition: transform 0.3s;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        color: white;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .modal.active .modal-content {
        transform: scale(1);
      }

      .modal-header {
        display: flex;
        align-items: flex-start;
        margin-bottom: 0;
        gap: 12px;
      }
      .modal-profile-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        padding: 5px;
        box-sizing: border-box;
        object-fit: contain;
      }
      .modal-text-group {
        display: flex;
        flex-direction: column;
      }

      .modal-day-title {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
        line-height: 1.2;
      }
      .modal-subtext {
        font-size: 14px;
        font-weight: 400;
        opacity: 0.9;
        margin: 5px 0 0 0;
        word-break: keep-all;
      }

      #modal-image {
        width: 247px;
        height: 247px;
        object-fit: cover;
        border-radius: 8px;
        margin: 12px auto;
        background-color: white;
        display: block;
      }
      /* [ì¶”ê°€] 10ì¼ì°¨ ì—°ë ¥ ì´ë¯¸ì§€ ì „ìš© ìŠ¤íƒ€ì¼ (175x247) */
      #modal-image.vertical {
        width: 175px;
        height: 247px;
      }

      .modal-btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .modal-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        border-radius: 50px;
        border: none;
        font-size: 0.9rem;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.1s;
        font-family: "Pretendard", sans-serif;
      }
      .modal-btn:active {
        transform: scale(0.96);
      }

      .btn-save {
        width: 133px;
        height: 47px;
        background-color: white;
        color: var(--primary-color);
      }
      .btn-close {
        width: 106px;
        height: 47px;
        background-color: white;
        color: #333;
      }

      /* ë„ì›€ë§ ëª¨ë‹¬ */
      .modal-content.help-modal {
        background-color: white;
        color: #333;
        padding: 30px 25px;
        text-align: center;
        width: 85%;
        max-width: 320px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        position: relative;
        transform: scale(0.9);
        transition: transform 0.3s;
        box-sizing: border-box;
      }
      .help-title {
        font-size: 1.2rem;
        font-weight: 800;
        margin: 0 0 5px 0;
        color: #333;
      }
      .help-subtitle {
        font-size: 0.85rem;
        color: #888;
        margin-bottom: 25px;
        font-weight: 500;
        text-decoration: none;
      }
      .help-list {
        list-style: none;
        padding: 0;
        margin: 0 0 30px 0;
        text-align: left;
      }
      .help-list li {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        font-size: 0.85rem;
        margin-bottom: 10px;
        line-height: 1.5;
        color: #555;
        word-break: keep-all;
      }
      .help-bullet-icon {
        width: 13px;
        height: 13px;
        margin-top: 4px;
        flex-shrink: 0;
        object-fit: contain;
      }
      .small-text {
        font-size: 0.75rem;
        color: #777;
      }
      .help-close-btn {
        background-color: #ffece5;
        color: var(--primary-color);
        border: none;
        padding: 14px 0;
        border-radius: 50px;
        font-weight: 700;
        font-size: 0.95rem;
        cursor: pointer;
        width: 100%;
        font-family: "Pretendard", sans-serif;
      }

      dotlottie-player {
        position: fixed;
        width: 1000px;
        height: 1000px;
        z-index: 2001;
        transform: translate(-50%, -70%);
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <header>
      <nav class="top-nav">
        <a
          href="https://twitter.com/OnceUponA4ever"
          target="_blank"
          class="event-btn"
        >
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-star_fnjm1p.png"
            alt="Event"
            class="btn-icon"
          />
          ì´ë²¤íŠ¸ ê³„ì • ë°”ë¡œ ê°€ê¸°
        </a>
        <div class="nav-icons">
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/Property_1_Default_lo56fi.png"
            alt="Help"
            class="nav-icon"
            id="help-icon"
          />
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/Property_1_Default_1_qapac6.png"
            alt="Share"
            class="nav-icon"
            id="share-icon"
          />
        </div>
      </nav>
      <div class="logo-area">
        <img
          src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/Logo_ip8hy8.png"
          alt="Title"
          class="title-image"
        />
        <p class="sub-title">2026 HAPPY POONGRAE-DAY CALENDAR</p>
      </div>
    </header>

    <div class="calendar-container" id="calendar"></div>

    <footer>
      <a
        href="https://twitter.com/OnceUponA4ever"
        target="_blank"
        class="footer-link"
        >@OnceUponA4ever</a
      >
    </footer>

    <div id="modal" class="modal">
      <div class="modal-content daily-modal">
        <div class="modal-header">
          <img
            src=""
            id="modal-header-icon"
            class="modal-profile-icon"
            alt="icon"
          />
          <div class="modal-text-group">
            <h2 id="modal-day-title" class="modal-day-title">1ì¼ì°¨</h2>
            <p id="modal-subtext" class="modal-subtext">ë©”ì‹œì§€ ë‚´ìš©</p>
          </div>
        </div>
        <img id="modal-image" src="" alt="Popup Image" />
        <div class="modal-btn-group">
          <button class="modal-btn btn-save" id="save-btn">ì €ì¥í•˜ê¸°</button>
          <button class="modal-btn btn-close" id="close-modal-btn">ë‹«ê¸°</button>
        </div>
      </div>
    </div>

    <div id="help-modal" class="modal">
      <div class="modal-content help-modal">
        <h3 class="help-title">'í’ë“œë²¤íŠ¸ ìº˜ë¦°ë”'ë€?</h3>
        <p class="help-subtitle">@OnceUponA4ever</p>
        <ul class="help-list">
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-star_fnjm1p.png"
              class="help-bullet-icon"
              alt="*"
            /><span
              >ì¡°í’ë˜ ë°°ìš°ì˜ ìƒì¼ì„ ì¹´ìš´íŠ¸ë‹¤ìš´ í•˜ëŠ” ì–´ë“œë²¤íŠ¸ ìº˜ë¦°ë” í˜•ì‹ì˜
              ì´ë²¤íŠ¸ì˜ˆìš”.</span
            >
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-star_fnjm1p.png"
              class="help-bullet-icon"
              alt="*"
            /><span
              >2026ë…„ 1ì›” 1ì¼ë¶€í„° 10ì¼ê¹Œì§€ ë§¤ì¼ í•´ë‹¹ ë‚ ì§œì˜ ìº˜ë¦°ë”ê°€
              ì˜¤í”ˆë¼ìš”.</span
            >
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-star_fnjm1p.png"
              class="help-bullet-icon"
              alt="*"
            /><span>ì§€ë‚œ ë‚ ì§œì˜ ìº˜ë¦°ë”ëŠ” 'í€´ì¦ˆ'ë¥¼ ë§íˆë©´ ì—´ ìˆ˜ ìˆì–´ìš”.</span>
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-star_fnjm1p.png"
              class="help-bullet-icon"
              alt="*"
            /><span
              >10ì¼ì˜ ìº˜ë¦°ë”ë¥¼ ëª¨ë‘ ì—´ì–´ë³¸ ë¶„ë“¤ì—ê²Œ 'ìŠ¤í˜ì…œ íŠ¹ì „'ì„ ë“œë ¤ìš”.
              <br /><span class="small-text"
                >(ìˆ˜ë ¹ ë°©ë²•ì€ ì´ë²¤íŠ¸ ê³„ì •ì„ ì°¸ê³ í•´ ì£¼ì„¸ìš”.)</span
              ></span
            >
          </li>
        </ul>
        <button class="help-close-btn" id="help-close-btn">
          ìº˜ë¦°ë” í™•ì¸í•˜ëŸ¬ ê°€ê¸°
        </button>
      </div>
    </div>

    <script
      src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
      type="module"
    ></script>

    <script>
      const daysData = [
        {
          day: 1,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767014489/Frame_25_2_dxybk5.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year01_aru1od.png",
          message: "ê³ ê¹”ëª¨ì í’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ë°°ìš° ì¡°í’ë˜ì˜ ì¶œìƒ ì—°ë„ëŠ”?",
          answer: "1983",
        },
        {
          day: 2,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003522/Frame_25_1_um7u0h.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year02_uctqqs.png",
          message: "ë‘ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "ì¡°í’ë˜ ë°°ìš°ì˜ ì´ìˆ˜ì ì¢…ëª©ì€?",
          answer: "ë´‰ì‚°íƒˆì¶¤",
        },
        {
          day: 3,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year03_wtxyog.png",
          message: "ì„¸ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "ë ˆë“œë¶ ë°°ì—­ ì´ë¦„ì€?",
          answer: "ë¡œë ë¼ì´",
        },
        {
          day: 4,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year04_nrkhpp.png",
          message: "ë„¤ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "ì—ë“œëª¬ë“œ ì—­ì„ ë§¡ì€ ë®¤ì§€ì»¬ì€?",
          answer: "í”Œë ˆì„ì¦ˆ",
        },
        {
          day: 5,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year05_kbvzl7.png",
          message: "ë‹¤ì„¯ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "MBTI ìœ í˜•ì€?",
          answer: "ISFJ",
        },
        {
          day: 6,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year06_mrk9py.png",
          message: "ì—¬ì„¯ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "2010ë…„ ì…ë‹¨í•œ ê·¹ë‹¨ì€?",
          answer: "ì„œìš¸ì˜ˆìˆ ë‹¨",
        },
        {
          day: 7,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year07_rsivuj.png",
          message: "ì¼ê³± ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "ê°€ì¥ ì•½í•œ ê²Œì„ì€?",
          answer: "ê°€ìœ„ë°”ìœ„ë³´",
        },
        {
          day: 8,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year08_okburr.png",
          message: "ì—¬ëŸ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "íŒ¬ì¹´í˜ í´ì§±ì€?",
          answer: "ì¡°í’ë˜",
        },
        {
          day: 9,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-puzzle_vgalnp.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001379/year09_iptilo.png",
          message: "ì•„í™‰ ë²ˆì§¸ í¼ì¦ ì¡°ê°",
          quiz: "ì‘ì›í•˜ëŠ” ì•¼êµ¬íŒ€ì€?",
          answer: "ë¡¯ë°",
        },
        {
          day: 10,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003524/Frame_25_xupqul.png",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/G-gift_ceawqi.png",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003389/year_qotw6w.png",
          message: "D-Day ê¸°ë… ì¹´ë“œ",
          quiz: "ê°€ì¥ ì›ƒê¸´ ì‚¬ëŒ ì£¼ì¥ ì£¼ì²´ëŠ”?",
          answer: "ë³¸ì¸",
        },
      ];

      const calendarContainer = document.getElementById("calendar");
      const modal = document.getElementById("modal");
      const modalDayTitle = document.getElementById("modal-day-title");
      const modalSubtext = document.getElementById("modal-subtext");
      const modalImage = document.getElementById("modal-image");
      const modalHeaderIcon = document.getElementById("modal-header-icon");
      const saveBtn = document.getElementById("save-btn");
      const closeBtn = document.getElementById("close-modal-btn");
      const helpIcon = document.getElementById("help-icon");
      const shareIcon = document.getElementById("share-icon");
      const helpModal = document.getElementById("help-modal");
      const helpCloseBtn = document.getElementById("help-close-btn");

      const today = new Date();
      const currentMonth = today.getMonth() + 1;
      const currentDay = today.getDate();
      const targetMonth = 12;
      const isDebugMode = false;

      let openedDays = JSON.parse(localStorage.getItem("openedDays_Dec")) || [];
      let currentImageUrl = "";

      class LottiUI {
        constructor(x, y) {
          const div = document.createElement("dotlottie-player");
          div.setAttribute(
            "src",
            "https://lottie.host/dcb52f92-c4c4-413f-b932-8ae17a2b2970/I4W37TF2zG.lottie"
          );
          div.setAttribute("background", "transparent");
          div.setAttribute("speed", "1");
          div.setAttribute("loop", "false");
          div.setAttribute("autoplay", "true");
          div.style.left = x + "px";
          div.style.top = y + "px";
          document.body.append(div);
          setTimeout(() => div.remove(), 3000);
        }
      }

      function openDoor(data, doorElement) {
        doorElement.classList.add("open");
        doorElement.classList.remove("missed");
        if (!openedDays.includes(data.day)) {
          openedDays.push(data.day);
          localStorage.setItem("openedDays_Dec", JSON.stringify(openedDays));
        }
        showModal(data);
      }

      daysData.forEach((data) => {
        const door = document.createElement("div");
        door.classList.add("door");

        const isOpened = openedDays.includes(data.day);
        let isPast =
          currentMonth > targetMonth ||
          (currentMonth === targetMonth && currentDay > data.day);

        if (isOpened) door.classList.add("open");
        else if (isPast && !isDebugMode) door.classList.add("missed");

        let numHTML = `<span class="door-num">${data.day}</span>`;
        let starHTML_front = "";
        let starHTML_back = "";

        if (data.day === 10) {
          starHTML_front = `
            <div class="door-num-10-wrapper">
                <img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767016729/Star_1_bnmba7.png" class="star-icon" alt="star"> 
                <span>${data.day}</span>
            </div>`;

          starHTML_back = `
            <div class="door-num-10-wrapper">
                <img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767016760/Star_1_1_elho32.png" class="star-icon" alt="star">
                <span>${data.day}</span>
            </div>`;
        } else {
          starHTML_front = numHTML;
          starHTML_back = numHTML;
        }

        door.innerHTML = `
        <div class="door-inner">
            <div class="door-front">
                ${starHTML_front}
                <img src="${data.coverImage}" class="cover-image" alt="Day ${
          data.day
        }">
                ${
                  isPast && !isOpened && !isDebugMode
                    ? `<img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1766951941/ic-lock_ggf1vm.png" class="lock-overlay" alt="Locked">`
                    : ""
                }
            </div> 
            <div class="door-back">
                ${starHTML_back}
                <img src="${
                  data.puzzleImage
                }" class="puzzle-image" alt="Puzzle">
            </div>
        </div>
        `;

        door.addEventListener("click", () => {
          if (openedDays.includes(data.day)) {
            showModal(data);
            return;
          }
          if (isPast && !isDebugMode) {
            const userAnswer = prompt(`[í€´ì¦ˆ] ${data.quiz}`);
            if (userAnswer && userAnswer.trim() === data.answer) {
              alert("ì •ë‹µ! ğŸ‰");
              openDoor(data, door);
            } else if (userAnswer !== null) {
              alert("ë•¡! ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.");
            }
            return;
          }
          if (
            currentMonth < targetMonth ||
            (currentMonth === targetMonth && currentDay < data.day)
          ) {
            if (!isDebugMode) {
              alert(`ì•„ì§ 12ì›” ${data.day}ì¼ì´ ì•„ë‹™ë‹ˆë‹¤!`);
              return;
            }
          }
          openDoor(data, door);
        });

        calendarContainer.appendChild(door);
      });

      function showModal(data) {
        modalDayTitle.textContent = `${data.day}ì¼ì°¨`;
        modalSubtext.textContent = data.message;
        modalImage.src = data.contentImage;
        modalHeaderIcon.src = data.coverImage;
        currentImageUrl = data.contentImage;
        modal.classList.add("active");
        new LottiUI(window.innerWidth / 2, window.innerHeight / 2);

        // [ë³€ê²½] 10ì¼ì°¨ì¼ ë•Œë§Œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½ ë° ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ í´ë˜ìŠ¤ ì¶”ê°€
        if (data.day === 10) {
          saveBtn.textContent = "ì—°ë ¥ ë°›ê¸°";
          modalImage.classList.add("vertical"); // 175x247 í´ë˜ìŠ¤ ì¶”ê°€
        } else {
          saveBtn.textContent = "ì €ì¥í•˜ê¸°";
          modalImage.classList.remove("vertical"); // í´ë˜ìŠ¤ ì œê±°
        }
      }

      function closeModal() {
        modal.classList.remove("active");
      }
      function downloadImage() {
        if (!currentImageUrl) return;
        const link = document.createElement("a");
        link.href = currentImageUrl;
        link.download = `Day_${modalDayTitle.textContent}_Image`;
        link.target = "_blank";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      closeBtn.addEventListener("click", closeModal);

      // [ë³€ê²½] ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (10ì¼ì°¨ = ë§í¬ ì´ë™, ë‚˜ë¨¸ì§€ = ë‹¤ìš´ë¡œë“œ)
      saveBtn.addEventListener("click", () => {
        if (modalDayTitle.textContent === "10ì¼ì°¨") {
          window.open("https://twitter.com/OnceUponA4ever", "_blank");
        } else {
          downloadImage();
        }
      });

      function openHelpModal() {
        helpModal.classList.add("active");
      }
      function closeHelpModal() {
        helpModal.classList.remove("active");
      }
      helpIcon.addEventListener("click", openHelpModal);
      helpCloseBtn.addEventListener("click", closeHelpModal);

      shareIcon.addEventListener("click", async () => {
        try {
          const currentUrl = window.location.href;
          await navigator.clipboard.writeText(currentUrl);
          alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        } catch (err) {
          console.error("ë³µì‚¬ ì‹¤íŒ¨:", err);
          alert("ì£¼ì†Œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
      });

      window.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
        if (e.target === helpModal) closeHelpModal();
      });
    </script>
  </body>
</html>
