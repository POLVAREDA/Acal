<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Poongrae-Day Calendar</title>

    <link
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
      rel="stylesheet"
    />

    <style>
      @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");

      :root {
        --primary-color: #ff8f56; /* ì§„í•œ ì˜¤ë Œì§€ (ì˜¤í”ˆ ì „ ë°°ê²½) */
        --card-bg: #ffece1; /* ì—°í•œ ì‚´êµ¬ìƒ‰ (ì˜¤í”ˆ í›„ ë°°ê²½) */
        --text-color: #ff763b; /* í…ìŠ¤íŠ¸ì»¬ëŸ¬ */
      }

      body {
        font-family: "Pretendard", "Noto Sans KR", sans-serif;
        background-image: url("https://res.cloudinary.com/dkqqxjsek/image/upload/v1767002360/Frame_84_bh88ll.png");
        background-size: auto;
        background-position: center top;
        background-repeat: repeat;
        background-attachment: fixed;
        background-color: #fcfcfc;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: #333;
        overflow-x: hidden;
      }

      /* --- í—¤ë” --- */
      header {
        width: 100%;
        max-width: 420px;
        padding: 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 10;
      }

      .top-nav {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 30px;
        margin-bottom: 20px;
      }

      .event-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 10px 8px 6px;
        gap: 2px;
        border-radius: 27px;
        background: #fff;
        box-shadow: 0 2px 8px 0 rgba(163, 73, 27, 0.15);
        border: none;
        color: var(--Primary-Text, #ff763b);
        text-align: center;
        font-family: Pretendard;
        font-size: 14px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.28px;
        cursor: pointer;
        text-decoration: none;
        box-sizing: border-box;
        white-space: nowrap;
      }

      .btn-icon {
        width: 18px;
        height: 18px;
        object-fit: contain;
      }
      .nav-icons {
        display: flex;
        gap: 15px;
        align-items: center;
      }
      .nav-icon {
        width: 24px;
        height: 24px;
        object-fit: contain;
        cursor: pointer;
      }

      /* --- íƒ€ì´í‹€ --- */
      .logo-area {
        text-align: center;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .title-image {
        width: 145px;
        height: 96px;
        object-fit: contain;
        display: block;
        margin-bottom: 10px;
        max-width: 100%;
      }

      .sub-title {
        color: var(--BrownBlack, #564343);
        text-align: center;
        font-family: Pretendard;
        font-size: 15px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.3px;
      }

      /* --- ìº˜ë¦°ë” ê·¸ë¦¬ë“œ --- */
      .calendar-container {
        display: grid;
        grid-template-columns: repeat(2, 130px);
        justify-content: center;
        gap: 24px;
        width: 100%;
        max-width: 380px;
        margin-bottom: 40px;
        z-index: 1;
      }

      .door {
        width: 100%;
        height: 150px;
        perspective: 1000px;
        cursor: pointer;
        position: relative;
      }

      /* --- ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ --- */
      @keyframes hoverBob {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      @keyframes todayBob {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(5px);
        }
      }

      .door:hover {
        animation: hoverBob 1s ease-in-out !important;
        z-index: 20;
      }

      .door.is-today:not(.open) {
        animation: todayBob 2s ease-in-out infinite;
        z-index: 5;
      }

      .door-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
      }

      .door.open .door-inner {
        transform: rotateY(180deg);
      }

      /* --- ì¹´ë“œ ì•/ë’¤ ê³µí†µ --- */
      .door-front,
      .door-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        border-radius: 8px;
        overflow: hidden;
        box-sizing: border-box;
        padding: 15px;
      }

      .door-front {
        background-color: var(--primary-color);
        color: white;
      }

      .door-front .door-num {
        font-family: Pretendard;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: -0.32px;
        color: white;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
      }

      .cover-image {
        width: 80%;
        height: auto;
        object-fit: contain;
        align-self: center;
        margin-top: 10px;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .door-back {
        background-color: var(--card-bg);
        transform: rotateY(180deg);
        border: none;
      }

      .door-back .door-num {
        font-family: Pretendard;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: -0.32px;
        color: var(--primary-color);
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
      }

      .puzzle-image {
        width: 70%;
        height: auto;
        object-fit: contain;
        align-self: center;
        margin-top: 5px;
      }

      .door.missed .door-front {
        background-color: var(--primary-color);
      }

      .lock-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 24px;
        height: 28px;
        z-index: 10;
        opacity: 0.9;
        object-fit: contain;
      }

      .door.missed .cover-image {
        opacity: 0.3;
      }

      .door-num-10-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 30px;
        margin-bottom: 5px;
      }
      .star-icon {
        width: 30px;
        height: 30px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .door-num-10-wrapper span {
        position: relative;
        z-index: 1;
        font-size: 0.8rem;
        font-weight: 600;
        margin: 0;
        padding-top: 1px;
      }
      .door-front .door-num-10-wrapper span {
        color: var(--primary-color);
      }
      .door-back .door-num-10-wrapper span {
        color: white;
      }

      /* --- í‘¸í„° & ëª¨ë‹¬ CSS --- */
      footer {
        margin-bottom: 40px;
        z-index: 10;
      }
      .footer-link {
        color: var(--primary-color);
        text-decoration: underline;
        font-size: 0.9rem;
        font-weight: 500;
        text-underline-offset: 4px;
        cursor: pointer;
      }
      .footer-wrapper {
        margin-top: 80px;
        width: 100%;
        display: flex;
        justify-content: center;
        z-index: 10;
      }

      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        backdrop-filter: blur(2px);
      }
      .modal.active {
        opacity: 1;
        visibility: visible;
      }

      /* ëª¨ë‹¬ ì• ë‹ˆë©”ì´ì…˜ */
      @keyframes bounceIn {
        0% {
          transform: scale(0.8);
          opacity: 0;
        }
        60% {
          transform: scale(1.05);
          opacity: 1;
        }
        80% {
          transform: scale(0.95);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes bounceOut {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        30% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.8);
          opacity: 0;
        }
      }
      @keyframes bounceClick {
        0% {
          transform: scale(1);
        }
        30% {
          transform: scale(0.9);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }
      .animate-bounce {
        animation: bounceClick 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .modal-content.daily-modal {
        background: var(--primary-color);
        padding: 20px;
        border-radius: 12px;
        text-align: left;
        width: 295px;
        height: 422px;
        position: relative;
        transform: scale(0.9);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        color: white;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;

        /* ì´ë¯¸ì§€ê°€ íŠ€ì–´ë‚˜ì™€ë„ ì˜ë¦¬ì§€ ì•Šê²Œ ì„¤ì • */
        overflow: visible;
        /* ìƒë‹¨ ì´ë¯¸ì§€ê°€ í™”ë©´ ë°–ìœ¼ë¡œ ì˜ë¦¬ì§€ ì•Šë„ë¡ ì—¬ë°± í™•ë³´ */
        margin-top: 60px;
      }

      /* ìƒë‹¨ ì¥ì‹ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
      .modal-top-deco {
        position: absolute;
        top: auto;
        bottom: 102.5%;
        left: 50%;
        transform: translateX(-50%); /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
        width: 94px;
        height: auto;
        z-index: 25;
        object-fit: contain;
        pointer-events: none;
        margin-bottom: -12px;
      }

      .modal.active .modal-content {
        animation: bounceIn 0.4s ease-out forwards;
      }
      .modal.closing .modal-content {
        animation: bounceOut 0.3s ease-in forwards;
      }
      .modal.closing {
        opacity: 0;
        transition: opacity 0.3s;
      }

      .modal-header {
        display: flex;
        align-items: flex-start;
        margin-bottom: 0;
        gap: 12px;
      }
      .modal-profile-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        padding: 5px;
        box-sizing: border-box;
        object-fit: contain;
      }
      .modal-text-group {
        display: flex;
        flex-direction: column;
      }

      .modal-day-title {
        font-family: Pretendard;
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.36px;
        margin: 0;
        line-height: 1.2;
      }
      .modal-subtext {
        font-family: Pretendard;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 20px;
        letter-spacing: -0.28px;
        opacity: 0.9;
        margin: 5px 0 0 0;
        word-break: keep-all;
      }

      #modal-image {
        width: 247px;
        height: 247px;
        object-fit: cover;
        border-radius: 8px;
        margin: 12px auto;
        background-color: white;
        display: block;
      }
      #modal-image.vertical {
        width: 175px;
        height: 247px;
      }

      .modal-btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .modal-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        border-radius: 50px;
        border: none;
        font-size: 0.9rem;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.1s;
        font-family: "Pretendard", sans-serif;
      }
      .modal-btn:active {
        transform: scale(0.96);
      }

      .btn-save {
        width: 133px;
        height: 47px;
        background-color: white;
        color: var(--primary-color);
      }
      .btn-close {
        width: 106px;
        height: 47px;
        background-color: white;
        color: #333;
      }

      /* ë„ì›€ë§ ëª¨ë‹¬ */
      .modal-content.help-modal {
        background-color: white;
        color: #333;
        padding: 30px 25px;
        text-align: center;
        width: 85%;
        max-width: 320px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        position: relative;
        transform: scale(0.9);
        transition: transform 0.3s;
        box-sizing: border-box;
      }
      .help-title {
        font-size: 1.2rem;
        font-weight: 800;
        margin: 0 0 5px 0;
        color: #333;
      }
      .help-subtitle {
        font-size: 0.85rem;
        font-weight: 500;
        color: #888;
        margin-bottom: 25px;
        text-decoration: none;
      }
      .help-list {
        list-style: none;
        padding: 0;
        margin: 0 0 30px 0;
        text-align: left;
      }
      .help-list li {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        font-size: 0.85rem;
        margin-bottom: 10px;
        line-height: 1.5;
        color: #555;
        word-break: keep-all;
      }
      .help-bullet-icon {
        width: 13px;
        height: 13px;
        margin-top: 4px;
        flex-shrink: 0;
        object-fit: contain;
      }
      .small-text {
        font-size: 0.75rem;
        color: #777;
      }
      .help-close-btn {
        background-color: #ffece5;
        color: var(--primary-color);
        border: none;
        padding: 14px 0;
        border-radius: 50px;
        font-weight: 700;
        font-size: 0.95rem;
        cursor: pointer;
        width: 100%;
        font-family: "Pretendard", sans-serif;
      }

      dotlottie-player {
        position: fixed;
        width: 1000px;
        height: 1000px;
        z-index: 2001;
        transform: translate(-50%, -70%);
        pointer-events: none;
      }

      /* SweetAlert ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
      .swal2-popup {
        font-family: "Pretendard", sans-serif !important;
        border-radius: 15px !important;
      }
      .swal2-title {
        font-size: 1.2rem !important;
        color: #333 !important;
      }
      .swal2-confirm {
        background-color: var(--primary-color) !important;
        border-radius: 20px !important;
      }
    </style>
  </head>

  <body>
    <header>
      <nav class="top-nav">
        <a
          href="https://twitter.com/OnceUponA4ever"
          target="_blank"
          class="event-btn"
        >
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
            alt="Event"
            class="btn-icon"
          />
          ì´ë²¤íŠ¸ ê³„ì • ë°”ë¡œ ê°€ê¸°
        </a>
        <div class="nav-icons">
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045799/Property_1_Default_rzryfx.svg"
            alt="Help"
            class="nav-icon"
            id="help-icon"
          />
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/Property_1_Default_1_tjrnan.svg"
            alt="Share"
            class="nav-icon"
            id="share-icon"
          />
        </div>
      </nav>
      <div class="logo-area">
        <img
          src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045802/Title_mjcefl.svg"
          alt="Title"
          class="title-image"
        />
        <p class="sub-title">2026 HAPPY POONGRAE-DAY CALENDAR</p>
      </div>
    </header>

    <div class="calendar-container" id="calendar"></div>

    <div class="footer-wrapper">
      <footer>
        <a
          href="https://twitter.com/OnceUponA4ever"
          target="_blank"
          class="footer-link"
          >@OnceUponA4ever</a
        >
      </footer>
    </div>

    <div id="modal" class="modal">
      <div class="modal-content daily-modal">
        <img src="" id="modal-top-deco" class="modal-top-deco" alt="deco" />

        <div class="modal-header">
          <img
            src=""
            id="modal-header-icon"
            class="modal-profile-icon"
            alt="icon"
          />
          <div class="modal-text-group">
            <h2 id="modal-day-title" class="modal-day-title">1ì¼ì°¨</h2>
            <p id="modal-subtext" class="modal-subtext">ë©”ì‹œì§€ ë‚´ìš©</p>
          </div>
        </div>
        <img id="modal-image" src="" alt="Popup Image" />
        <div class="modal-btn-group">
          <button class="modal-btn btn-save" id="save-btn">ì €ì¥í•˜ê¸°</button>
          <button class="modal-btn btn-close" id="close-modal-btn">ë‹«ê¸°</button>
        </div>
      </div>
    </div>

    <div id="help-modal" class="modal">
      <div class="modal-content help-modal">
        <h3 class="help-title">'í’ë“œë²¤íŠ¸ ìº˜ë¦°ë”'ë€?</h3>
        <p class="help-subtitle">@OnceUponA4ever</p>
        <ul class="help-list">
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span
              >ì¡°í’ë˜ ë°°ìš°ì˜ ìƒì¼ì„ ì¹´ìš´íŠ¸ë‹¤ìš´ í•˜ëŠ” ì–´ë“œë²¤íŠ¸ ìº˜ë¦°ë” í˜•ì‹ì˜
              ì´ë²¤íŠ¸ì˜ˆìš”.</span
            >
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span
              >2026ë…„ 1ì›” 1ì¼ë¶€í„° 10ì¼ê¹Œì§€ ë§¤ì¼ í•´ë‹¹ ë‚ ì§œì˜ ìº˜ë¦°ë”ê°€
              ì˜¤í”ˆë¼ìš”.</span
            >
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span>ì§€ë‚œ ë‚ ì§œì˜ ìº˜ë¦°ë”ëŠ” 'í€´ì¦ˆ'ë¥¼ ë§íˆë©´ ì—´ ìˆ˜ ìˆì–´ìš”.</span>
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span
              >10ì¼ì˜ ìº˜ë¦°ë”ë¥¼ ëª¨ë‘ ì—´ì–´ë³¸ ë¶„ë“¤ì—ê²Œ 'ìŠ¤í˜ì…œ íŠ¹ì „'ì„ ë“œë ¤ìš”.
              <br /><span class="small-text"
                >(ìˆ˜ë ¹ ë°©ë²•ì€ ì´ë²¤íŠ¸ ê³„ì •ì„ ì°¸ê³ í•´ ì£¼ì„¸ìš”.)</span
              ></span
            >
          </li>
        </ul>
        <button class="help-close-btn" id="help-close-btn">
          ìº˜ë¦°ë” í™•ì¸í•˜ëŸ¬ ê°€ê¸°
        </button>
      </div>
    </div>

    <script
      src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
      type="module"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      const daysData = [
        {
          day: 1,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year01_aru1od.png",
          message: "ê³ ê¹”ëª¨ì í’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ë°°ìš° ì¡°í’ë˜ì˜ ì¶œìƒ ì—°ë„ëŠ”?",
          answer: "1983",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042654/_%EB%A0%88%EC%9D%B4%EC%96%B4_2_prhn0y.svg",
        },
        {
          day: 2,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_1_yc3jp0.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year02_uctqqs.png",
          message: "í’ë†€ì¥!-ì„ ê¸€ë¼ìŠ¤í’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ì¡°í’ë˜ ë°°ìš°ì˜ ì´ìˆ˜ì ì¢…ëª©ì€?",
          answer: "ë´‰ì‚°íƒˆì¶¤",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 3,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year03_wtxyog.png",
          message: "ìœ ë©”í† ëª¨í’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ë ˆë“œë¶ ë°°ì—­ ì´ë¦„ì€?",
          answer: "ë¡œë ë¼ì´",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 4,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year04_nrkhpp.png",
          message: "í’ë”ê·¸ì™€ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ì—ë“œëª¬ë“œ ì—­ì„ ë§¡ì€ ë®¤ì§€ì»¬ì€?",
          answer: "í”Œë ˆì„ì¦ˆ",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 5,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year05_kbvzl7.png",
          message: "í’ë“œëª¬ë“œì™€ í¼ì¦ í•œ ì¡°ê°",
          quiz: "MBTI ìœ í˜•ì€?",
          answer: "ISFJ",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 6,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year06_mrk9py.png",
          message: "í’ë ë¼ì´ì™€ í¼ì¦ í•œ ì¡°ê°",
          quiz: "2010ë…„ ì…ë‹¨í•œ ê·¹ë‹¨ì€?",
          answer: "ì„œìš¸ì˜ˆìˆ ë‹¨",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 7,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svgA",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year07_rsivuj.png",
          message: "í’ë¹…ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ê°€ì¥ ì•½í•œ ê²Œì„ì€?",
          answer: "ê°€ìœ„ë°”ìœ„ë³´",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 8,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year08_okburr.png",
          message: "í† ë‹ˆ-ë¦¬ë”©í’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "íŒ¬ì¹´í˜ í´ì§±ì€?",
          answer: "ì¡°í’ë˜",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 9,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001379/year09_iptilo.png",
          message: "YKAí’ê³¼ í¼ì¦ í•œ ì¡°ê°",
          quiz: "ì‘ì›í•˜ëŠ” ì•¼êµ¬íŒ€ì€?",
          answer: "ë¡¯ë°",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 10,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767046459/Frame_25_cy9pft.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/Group_281_zmshqv.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003389/year_qotw6w.png",
          message: "ì—°ë ¥ í¬ìŠ¤í„°",
          quiz: "ê°€ì¥ ì›ƒê¸´ ì‚¬ëŒ ì£¼ì¥ ì£¼ì²´ëŠ”?",
          answer: "ë³¸ì¸",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
      ];

      const calendarContainer = document.getElementById("calendar");
      const modal = document.getElementById("modal");
      const modalDayTitle = document.getElementById("modal-day-title");
      const modalSubtext = document.getElementById("modal-subtext");
      const modalImage = document.getElementById("modal-image");
      const modalHeaderIcon = document.getElementById("modal-header-icon");
      const saveBtn = document.getElementById("save-btn");
      const closeBtn = document.getElementById("close-modal-btn");
      const helpIcon = document.getElementById("help-icon");
      const shareIcon = document.getElementById("share-icon");
      const helpModal = document.getElementById("help-modal");
      const helpCloseBtn = document.getElementById("help-close-btn");
      const modalTopDeco = document.getElementById("modal-top-deco");

      const today = new Date();
      today.setHours(0, 0, 0, 0);

      // [í…ŒìŠ¤íŠ¸ ì„¤ì •]
      const startYear = 2025;
      const startMonth = 12; // 12ì›”
      const startDay = 22; // 22ì¼
      const startDate = new Date(startYear, startMonth - 1, startDay);

      const isDebugMode = false;

      let openedDays =
        JSON.parse(localStorage.getItem("openedDays_Test")) || [];
      let currentImageUrl = "";

      class LottiUI {
        constructor(x, y) {
          const div = document.createElement("dotlottie-player");
          div.setAttribute(
            "src",
            "https://lottie.host/dcb52f92-c4c4-413f-b932-8ae17a2b2970/I4W37TF2zG.lottie"
          );
          div.setAttribute("background", "transparent");
          div.setAttribute("speed", "1");
          div.setAttribute("loop", "false");
          div.setAttribute("autoplay", "true");
          div.style.left = x + "px";
          div.style.top = y + "px";
          document.body.append(div);
          setTimeout(() => div.remove(), 3000);
        }
      }

      function openDoor(data, doorElement) {
        doorElement.classList.add("open");
        doorElement.classList.remove("missed");
        doorElement.classList.remove("is-today");
        if (!openedDays.includes(data.day)) {
          openedDays.push(data.day);
          localStorage.setItem("openedDays_Test", JSON.stringify(openedDays));
        }
        showModal(data);
      }

      daysData.forEach((data) => {
        const door = document.createElement("div");
        door.classList.add("door");

        const doorDate = new Date(startDate);
        doorDate.setDate(startDate.getDate() + (data.day - 1));

        const isPast = today > doorDate;
        const isFuture = today < doorDate;
        const isToday = today.getTime() === doorDate.getTime();

        const isOpened = openedDays.includes(data.day);

        if (isToday && !isOpened) {
          door.classList.add("is-today");
        }

        if (isOpened) door.classList.add("open");
        else if (isPast && !isDebugMode) door.classList.add("missed");

        let numHTML = `<span class="door-num">${data.day}</span>`;
        let starHTML_front = "";
        let starHTML_back = "";

        if (data.day === 10) {
          starHTML_front = `
            <div class="door-num-10-wrapper">
                <img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045800/Star_1_wwryei.svg" class="star-icon" alt="star"> 
                <span>${data.day}</span>
            </div>`;

          starHTML_back = `
            <div class="door-num-10-wrapper">
                <img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045799/Star_1_1_l9m5ho.svg" class="star-icon" alt="star">
                <span>${data.day}</span>
            </div>`;
        } else {
          starHTML_front = numHTML;
          starHTML_back = numHTML;
        }

        door.innerHTML = `
        <div class="door-inner">
            <div class="door-front">
                ${starHTML_front}
                <img src="${data.coverImage}" class="cover-image" alt="Day ${
          data.day
        }">
                ${
                  isPast && !isOpened && !isDebugMode
                    ? `<img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045797/Group_295_tzz6bu.svg" class="lock-overlay" alt="Locked">`
                    : ""
                }
            </div> 
            <div class="door-back">
                ${starHTML_back}
                <img src="${
                  data.puzzleImage
                }" class="puzzle-image" alt="Puzzle">
            </div>
        </div>
        `;

        door.addEventListener("click", () => {
          if (openedDays.includes(data.day)) {
            showModal(data);
            return;
          }

          if (isPast && !isDebugMode) {
            // [ìˆ˜ì •] SweetAlert2 í€´ì¦ˆ ì…ë ¥ì°½ìœ¼ë¡œ ë³€ê²½
            Swal.fire({
              title: "í€´ì¦ˆ!",
              text: `Q. ${data.quiz}`,
              input: "text",
              inputPlaceholder: "ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”",
              showCancelButton: true,
              confirmButtonText: "í™•ì¸",
              cancelButtonText: "ì·¨ì†Œ",
              confirmButtonColor: "#ff8f56",
              cancelButtonColor: "#999",
            }).then((result) => {
              if (result.isConfirmed) {
                const userAnswer = result.value;
                if (userAnswer && userAnswer.trim() === data.answer) {
                  Swal.fire({
                    title: "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰",
                    icon: "success",
                    confirmButtonText: "í™•ì¸",
                    confirmButtonColor: "#ff8f56",
                  }).then(() => {
                    openDoor(data, door);
                  });
                } else {
                  Swal.fire({
                    title: "ë•¡!",
                    text: "ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.",
                    icon: "error",
                    confirmButtonText: "í™•ì¸",
                    confirmButtonColor: "#ff8f56",
                  });
                }
              }
            });
            return;
          }

          if (isFuture) {
            if (!isDebugMode) {
              const openMonth = doorDate.getMonth() + 1;
              const openDay = doorDate.getDate();
              // [ìˆ˜ì •] SweetAlert2 ì•Œë¦¼ì°½ìœ¼ë¡œ ë³€ê²½
              Swal.fire({
                title: "ì•„ì§ ì˜¤í”ˆë˜ì§€ ì•Šì•˜ì–´ìš”!",
                text: `ì˜¤í”ˆ ì˜ˆì •ì¼: ${openMonth}ì›” ${openDay}ì¼`,
                icon: "warning",
                confirmButtonText: "í™•ì¸",
                confirmButtonColor: "#ff8f56",
              });
              return;
            }
          }

          openDoor(data, door);
        });

        calendarContainer.appendChild(door);
      });

      function showModal(data) {
        modalDayTitle.textContent = `${data.day}ì¼ì°¨`;
        modalSubtext.textContent = data.message;
        modalImage.src = data.contentImage;
        modalHeaderIcon.src = data.coverImage;

        if (data.decoImage) {
          modalTopDeco.src = data.decoImage;
          modalTopDeco.style.display = "block";
        } else {
          modalTopDeco.style.display = "none";
        }

        currentImageUrl = data.contentImage;
        modal.classList.add("active");
        new LottiUI(window.innerWidth / 2, window.innerHeight / 2);

        if (data.day === 10) {
          saveBtn.textContent = "ì—°ë ¥ ë°›ê¸°";
          modalImage.classList.add("vertical");
        } else {
          saveBtn.textContent = "ì €ì¥í•˜ê¸°";
          modalImage.classList.remove("vertical");
        }
      }

      function downloadImage() {
        if (!currentImageUrl) return;
        const link = document.createElement("a");
        link.href = currentImageUrl;
        link.download = `Day_${modalDayTitle.textContent}_Image`;
        link.target = "_blank";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      function closeModal() {
        modal.classList.add("closing");
        setTimeout(() => {
          modal.classList.remove("active");
          modal.classList.remove("closing");
        }, 300);
      }

      closeBtn.addEventListener("click", () => {
        closeBtn.classList.add("animate-bounce");
        setTimeout(() => {
          closeBtn.classList.remove("animate-bounce");
          closeModal();
        }, 400);
      });

      saveBtn.addEventListener("click", () => {
        if (modalDayTitle.textContent === "10ì¼ì°¨") {
          window.open("https://twitter.com/OnceUponA4ever", "_blank");
        } else {
          downloadImage();
        }
      });

      function openHelpModal() {
        helpModal.classList.add("active");
      }

      function closeHelpModal() {
        helpModal.classList.add("closing");
        setTimeout(() => {
          helpModal.classList.remove("active");
          helpModal.classList.remove("closing");
        }, 300);
      }

      helpIcon.addEventListener("click", openHelpModal);

      helpCloseBtn.addEventListener("click", () => {
        helpCloseBtn.classList.add("animate-bounce");
        setTimeout(() => {
          helpCloseBtn.classList.remove("animate-bounce");
          closeHelpModal();
        }, 400);
      });

      shareIcon.addEventListener("click", async () => {
        try {
          const currentUrl = window.location.href;
          await navigator.clipboard.writeText(currentUrl);
          Swal.fire({
            title: "ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!",
            icon: "success",
            confirmButtonText: "í™•ì¸",
            confirmButtonColor: "#ff8f56",
            timer: 1500,
            showConfirmButton: false,
          });
        } catch (err) {
          console.error("ë³µì‚¬ ì‹¤íŒ¨:", err);
          Swal.fire({
            title: "ë³µì‚¬ ì‹¤íŒ¨",
            text: "ì£¼ì†Œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.",
            icon: "error",
            confirmButtonColor: "#ff8f56",
          });
        }
      });

      window.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
        if (e.target === helpModal) closeHelpModal();
      });
    </script>
  </body>
</html>
