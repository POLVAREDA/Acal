<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Poongrae-Day Calendar</title>

    <style>
      @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");

      :root {
        --primary-color: #ff8f56; /* 진한 오렌지 (오픈 전 배경) */
        --card-bg: #ffece1; /* 연한 살구색 (오픈 후 배경) */
        --text-color: #ff763b; /* 텍스트컬러 */
      }

      body {
        font-family: "Pretendard", "Noto Sans KR", sans-serif;
        background-image: url("https://res.cloudinary.com/dkqqxjsek/image/upload/v1767002360/Frame_84_bh88ll.png");
        background-size: auto;
        background-position: center top;
        background-repeat: repeat;
        background-attachment: fixed;
        background-color: #fcfcfc;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: #333;
        overflow-x: hidden;
      }

      /* --- 헤더 --- */
      header {
        width: 100%;
        max-width: 420px;
        padding: 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 10;
      }

      .top-nav {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 30px;
        margin-bottom: 20px;
      }

      .event-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 10px 8px 6px;
        gap: 2px;
        border-radius: 27px;
        background: #fff;
        box-shadow: 0 2px 8px 0 rgba(163, 73, 27, 0.15);
        border: none;
        color: var(--Primary-Text, #ff763b);
        text-align: center;
        font-family: Pretendard;
        font-size: 14px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.28px;
        cursor: pointer;
        text-decoration: none;
        box-sizing: border-box;
        white-space: nowrap;
      }

      .btn-icon {
        width: 18px;
        height: 18px;
        object-fit: contain;
      }
      .nav-icons {
        display: flex;
        gap: 15px;
        align-items: center;
      }
      .nav-icon {
        width: 24px;
        height: 24px;
        object-fit: contain;
        cursor: pointer;
      }

      /* --- 타이틀 --- */
      .logo-area {
        text-align: center;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .title-image {
        width: 145px;
        height: 96px;
        object-fit: contain;
        display: block;
        margin-bottom: 10px;
        max-width: 100%;
      }

      .sub-title {
        color: var(--BrownBlack, #564343);
        text-align: center;
        font-family: Pretendard;
        font-size: 15px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.3px;
      }

      /* --- 캘린더 그리드 --- */
      .calendar-container {
        display: grid;
        grid-template-columns: repeat(2, 130px);
        justify-content: center;
        gap: 24px;
        width: 100%;
        max-width: 380px;
        margin-bottom: 40px;
        z-index: 1;
      }

      .door {
        width: 100%;
        height: 150px;
        perspective: 1000px;
        cursor: pointer;
        position: relative;
      }

      /* --- 애니메이션 정의 --- */
      @keyframes hoverBob {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      @keyframes todayBob {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(5px);
        }
      }

      .door:hover {
        animation: hoverBob 1s ease-in-out !important;
        z-index: 20;
      }

      .door.is-today:not(.open) {
        animation: todayBob 2s ease-in-out infinite;
        z-index: 5;
      }

      .door-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
      }

      .door.open .door-inner {
        transform: rotateY(180deg);
      }

      /* --- 카드 앞/뒤 공통 --- */
      .door-front,
      .door-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        border-radius: 8px;
        overflow: hidden;
        box-sizing: border-box;
        padding: 15px;
      }

      .door-front {
        background-color: var(--primary-color);
        color: white;
      }

      .door-front .door-num {
        font-family: Pretendard;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: -0.32px;
        color: white;
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
        flex-shrink: 0;
      }

      .cover-image {
        width: 100%;
        height: auto;
        max-height: calc(100% - 35px);
        object-fit: contain;
        align-self: center;
        margin-top: auto;
        margin-bottom: auto;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .door-back {
        background-color: var(--card-bg);
        transform: rotateY(180deg);
        border: none;
      }

      .door-back .door-num {
        font-family: Pretendard;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: -0.32px;
        color: var(--primary-color);
        margin-bottom: 5px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 30px;
        padding-top: 3px;
        box-sizing: border-box;
        flex-shrink: 0;
      }

      .puzzle-image {
        width: 80%;
        height: auto;
        max-height: calc(100% - 35px);
        object-fit: contain;
        align-self: center;
        margin-top: auto;
        margin-bottom: auto;
      }

      .door.missed .door-front {
        background-color: var(--primary-color);
      }

      .lock-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 24px;
        height: 28px;
        z-index: 10;
        opacity: 0.9;
        object-fit: contain;
      }

      .door.missed .cover-image {
        opacity: 0.3;
      }

      .door-num-10-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 30px;
        margin-bottom: 5px;
        flex-shrink: 0;
      }
      .star-icon {
        width: 30px;
        height: 30px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .door-num-10-wrapper span {
        position: relative;
        z-index: 1;
        font-size: 0.8rem;
        font-weight: 600;
        margin: 0;
        padding-top: 1px;
      }
      .door-front .door-num-10-wrapper span {
        color: var(--primary-color);
      }
      .door-back .door-num-10-wrapper span {
        color: white;
      }

      /* --- 푸터 & 모달 CSS --- */
      footer {
        margin-bottom: 40px;
        z-index: 10;
      }
      .footer-link {
        color: var(--primary-color);
        text-decoration: underline;
        font-size: 0.9rem;
        font-weight: 500;
        text-underline-offset: 4px;
        cursor: pointer;
      }
      .footer-wrapper {
        margin-top: 80px;
        width: 100%;
        display: flex;
        justify-content: center;
        z-index: 10;
      }

      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        backdrop-filter: blur(2px);
      }
      .modal.active {
        opacity: 1;
        visibility: visible;
      }

      /* 모달 애니메이션 */
      @keyframes bounceIn {
        0% {
          transform: scale(0.8);
          opacity: 0;
        }
        60% {
          transform: scale(1.05);
          opacity: 1;
        }
        80% {
          transform: scale(0.95);
        }
        100% {
          transform: scale(1);
        }
      }
      @keyframes bounceOut {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        30% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.8);
          opacity: 0;
        }
      }
      @keyframes bounceClick {
        0% {
          transform: scale(1);
        }
        30% {
          transform: scale(0.9);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }
      .animate-bounce {
        animation: bounceClick 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .modal-content.daily-modal {
        background: var(--primary-color);
        padding: 20px;
        border-radius: 12px;
        text-align: left;
        width: 295px;
        height: 422px;
        position: relative;
        transform: scale(0.9);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        color: white;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow: visible;
        margin-top: 60px;
      }

      .modal-top-deco {
        position: absolute;
        top: auto;
        bottom: 102.5%;
        left: 50%;
        transform: translateX(-50%);
        width: 94px;
        height: auto;
        z-index: 25;
        object-fit: contain;
        pointer-events: none;
        margin-bottom: -12px;
      }

      .modal.active .modal-content {
        animation: bounceIn 0.4s ease-out forwards;
      }
      .modal.closing .modal-content {
        animation: bounceOut 0.3s ease-in forwards;
      }
      .modal.closing {
        opacity: 0;
        transition: opacity 0.3s;
      }

      .modal-header {
        display: flex;
        align-items: flex-start;
        margin-bottom: 0;
        gap: 5px;
      }
      .modal-profile-icon {
        width: 50px;
        height: 50px;

        box-sizing: border-box;
        object-fit: contain;
      }
      .modal-text-group {
        display: flex;
        flex-direction: column;
      }

      .modal-day-title {
        font-family: Pretendard;
        font-size: 18px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        letter-spacing: -0.36px;
        margin: 0;
        line-height: 1.2;
      }
      .modal-subtext {
        font-family: Pretendard;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 20px;
        letter-spacing: -0.28px;
        opacity: 0.9;
        margin: 5px 0 0 0;
        word-break: keep-all;
      }

      #modal-image {
        width: 247px;
        height: 247px;
        object-fit: cover;
        border-radius: 8px;
        margin: 12px auto;
        background-color: white;
        display: block;
      }
      #modal-image.vertical {
        width: 175px;
        height: 247px;
      }

      .modal-btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .modal-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        border-radius: 50px;
        border: none;
        font-size: 0.9rem;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.1s;
        font-family: "Pretendard", sans-serif;
      }
      .modal-btn:active {
        transform: scale(0.96);
      }

      .btn-save {
        width: 133px;
        height: 47px;
        background-color: white;
        color: var(--primary-color);
      }
      .btn-close {
        width: 106px;
        height: 47px;
        background-color: white;
        color: #333;
      }

      /* 도움말 모달 */
      .modal-content.help-modal {
        background-color: white;
        color: #333;
        padding: 30px 25px;
        text-align: center;
        width: 85%;
        max-width: 320px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        position: relative;
        transform: scale(0.9);
        transition: transform 0.3s;
        box-sizing: border-box;
      }
      .help-title {
        font-size: 1.2rem;
        font-weight: 800;
        margin: 0 0 5px 0;
        color: #333;
      }
      .help-subtitle {
        font-size: 0.85rem;
        font-weight: 500;
        color: #888;
        margin-bottom: 25px;
        text-decoration: none;
      }
      .help-list {
        list-style: none;
        padding: 0;
        margin: 0 0 30px 0;
        text-align: left;
      }
      .help-list li {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        font-size: 0.85rem;
        margin-bottom: 10px;
        line-height: 1.5;
        color: #555;
        word-break: keep-all;
      }
      .help-bullet-icon {
        width: 13px;
        height: 13px;
        margin-top: 4px;
        flex-shrink: 0;
        object-fit: contain;
      }
      .small-text {
        font-size: 0.75rem;
        color: #777;
      }
      .help-close-btn {
        background-color: #ffece5;
        color: var(--primary-color);
        border: none;
        padding: 14px 0;
        border-radius: 50px;
        font-weight: 700;
        font-size: 0.95rem;
        cursor: pointer;
        width: 100%;
        font-family: "Pretendard", sans-serif;
      }

      /* --- 커스텀 순수 알럿 디자인 (아이콘 영역 포함) --- */
      .custom-alert-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 3000;
        backdrop-filter: blur(2px);
      }
      .custom-alert-box {
        background: white;
        padding: 30px 25px;
        border-radius: 20px;
        width: 280px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        animation: bounceIn 0.4s ease-out forwards;
      }
      .alert-icon-area {
        width: 50px;
        height: 50px;
        margin: 0 auto 15px auto;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .alert-icon-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      .alert-title {
        font-size: 1.15rem;
        font-weight: 700;
        margin-bottom: 8px;
        color: #333;
      }
      .alert-text {
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 15px;
        word-break: keep-all;
        line-height: 1.4;
      }
      .alert-input {
        width: 100%;
        padding: 12px;
        border: 1.5px solid #eee;
        border-radius: 10px;
        margin-bottom: 20px;
        box-sizing: border-box;
        outline: none;
        font-size: 1rem;
        text-align: center;
      }
      .alert-input:focus {
        border-color: var(--primary-color);
      }
      .alert-btn-group {
        display: flex;
        gap: 10px;
      }
      .alert-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 25px;
        font-weight: 700;
        cursor: pointer;
        font-size: 0.95rem;
        font-family: inherit;
      }
      .alert-btn-confirm {
        background: var(--primary-color);
        color: white;
      }
      .alert-btn-cancel {
        background: #f5f5f5;
        color: #888;
      }

      dotlottie-player {
        position: fixed;
        width: 1000px;
        height: 1000px;
        z-index: 2001;
        transform: translate(-50%, -70%);
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <header>
      <nav class="top-nav">
        <a
          href="https://twitter.com/OnceUponA4ever"
          target="_blank"
          class="event-btn"
        >
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
            alt="Event"
            class="btn-icon"
          />
          이벤트 계정 바로 가기
        </a>
        <div class="nav-icons">
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045799/Property_1_Default_rzryfx.svg"
            alt="Help"
            class="nav-icon"
            id="help-icon"
          />
          <img
            src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/Property_1_Default_1_tjrnan.svg"
            alt="Share"
            class="nav-icon"
            id="share-icon"
          />
        </div>
      </nav>
      <div class="logo-area">
        <img
          src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045802/Title_mjcefl.svg"
          alt="Title"
          class="title-image"
        />
        <p class="sub-title">2026 HAPPY POONGRAE-DAY CALENDAR</p>
      </div>
    </header>

    <div class="calendar-container" id="calendar"></div>

    <div class="footer-wrapper">
      <footer>
        <a
          href="https://twitter.com/OnceUponA4ever"
          target="_blank"
          class="footer-link"
          >@OnceUponA4ever</a
        >
      </footer>
    </div>

    <div id="custom-alert-overlay" class="custom-alert-overlay">
      <div class="custom-alert-box">
        <div class="alert-icon-area">
          <img id="alert-icon" class="alert-icon-img" src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767186212/%EB%AC%BC%EC%9D%8C%ED%91%9C_lofu9p.svg" alt="icon" />
        </div>
        <div id="alert-title" class="alert-title"></div>
        <div id="alert-text" class="alert-text"></div>
        <input
          type="text"
          id="alert-input"
          class="alert-input"
          placeholder="정답을 입력하세요"
        />
        <div class="alert-btn-group">
          <button id="alert-cancel" class="alert-btn alert-btn-cancel">
            취소
          </button>
          <button id="alert-confirm" class="alert-btn alert-btn-confirm">
            확인
          </button>
        </div>
      </div>
    </div>

    <div id="modal" class="modal">
      <div class="modal-content daily-modal">
        <img src="" id="modal-top-deco" class="modal-top-deco" alt="deco" />
        <div class="modal-header">
          <img
            src=""
            id="modal-header-icon"
            class="modal-profile-icon"
            alt="icon"
          />
          <div class="modal-text-group">
            <h2 id="modal-day-title" class="modal-day-title">1일차</h2>
            <p id="modal-subtext" class="modal-subtext">메시지 내용</p>
          </div>
        </div>
        <img id="modal-image" src="" alt="Popup Image" />
        <div class="modal-btn-group">
          <button class="modal-btn btn-save" id="save-btn">저장하기</button>
          <button class="modal-btn btn-close" id="close-modal-btn">닫기</button>
        </div>
      </div>
    </div>

    <div id="help-modal" class="modal">
      <div class="modal-content help-modal">
        <h3 class="help-title">'풍드벤트 캘린더'란?</h3>
        <p class="help-subtitle">@OnceUponA4ever</p>
        <ul class="help-list">
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span>조풍래 배우의 생일을 카운트다운 하는 이벤트예요.</span>
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span
              >2026년 1월 1일부터 10일까지 매일 해당 날짜의 캘린더가
              오픈돼요.</span
            >
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span>지난 날짜의 캘린더는 '퀴즈'를 맞히면 열 수 있어요.</span>
          </li>
          <li>
            <img
              src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045798/ic-star_sjx807.svg"
              class="help-bullet-icon"
              alt="*"
            /><span
              >10일의 캘린더를 모두 열어본 분들에게 '스페셜 특전'을 드려요.<br /><span
                class="small-text"
                >(수령 방법은 이벤트 계정을 참고해 주세요.)</span
              ></span
            >
          </li>
        </ul>
        <button class="help-close-btn" id="help-close-btn">
          캘린더 확인하러 가기
        </button>
      </div>
    </div>

    <script
      src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
      type="module"
    ></script>

    <script>
      const daysData = [
        {
          day: 1,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-1_g8znii.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year01_aru1od.png",
          message: "고깔모자 풍과 퍼즐 한 조각",
          quiz: "뮤지컬 배우 중, 1983년 1월 10일에 태어난 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042654/_%EB%A0%88%EC%9D%B4%EC%96%B4_2_prhn0y.svg",
        },
        {
          day: 2,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-2_temwtc.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001377/year02_uctqqs.png",
          message: "풍놀장!-선글라스풍과 퍼즐 한 조각",
          quiz: "칸쵸에 본인 이름이 \"당연히 없다\"는 발언에 긁힌 배우",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 3,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-3_ic7gaf.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year03_wtxyog.png",
          message: "유메토모풍과 퍼즐 한 조각",
          quiz: "목동에서 코인노래방 갔다가 트위터리안에게 들킨 배우는?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 4,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-4_x5aas1.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year04_nrkhpp.png",
          message: "풍더그와 퍼즐 한 조각",
          quiz: "뮤지컬 배우 중 봉산탈춤 이수자인 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 5,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-5_z79fce.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year05_kbvzl7.png",
          message: "풍드몬드와 퍼즐 한 조각",
          quiz: "자신의 패션을 끝내준다고 한 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 6,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178047/ic-6_z1hl65.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year06_mrk9py.png",
          message: "풍렐라이와 퍼즐 한 조각",
          quiz: "배우 기세중이 살면서 걸러야 하는 성씨 1위로 태그한 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 7,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178046/ic-7_fgyfnb.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year07_rsivuj.png",
          message: "풍빅과 퍼즐 한 조각",
          quiz: "팬에게 자신이 뭉툭하게 생겼다고 해서 어이없게 만든 배우는?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 8,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178047/ic-8_ctbnfe.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001378/year08_okburr.png",
          message: "토니-리딩풍과 퍼즐 한 조각",
          quiz: "풍라이와 놀장~!의 클짱은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 9,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178047/ic-9_nter2m.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/G-puzzle_hwtgap.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767001379/year09_iptilo.png",
          message: "YKA풍과 퍼즐 한 조각",
          quiz: "‘YKA FESTA’에서 뮤지컬 부문에서 수상한 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
        {
          day: 10,
          coverImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767178048/ic-10_yuob7y.svg",
          puzzleImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045796/Group_281_zmshqv.svg",
          contentImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767003389/year_qotw6w.png",
          message: "연력 포스터",
          quiz: "배우 조풍래를 대학로에서 가장 웃긴 사람 TOP3에 든다고 한 사람은?",
          answer: "조풍래",
          decoImage:
            "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767042826/_%EB%A0%88%EC%9D%B4%EC%96%B4_3_plrck6.svg",
        },
      ];

      const calendarContainer = document.getElementById("calendar");
      const modal = document.getElementById("modal");
      const alertOverlay = document.getElementById("custom-alert-overlay");
      const alertInput = document.getElementById("alert-input");
      const alertIcon = document.getElementById("alert-icon");

      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const startDate = new Date(2026, 0, 1);
      const isDebugMode = false;
      let openedDays =
        JSON.parse(localStorage.getItem("openedDays_Live")) || [];
      let currentImageUrl = "";

      // 상황별 아이콘 설정
      const ICONS = {
        quiz: "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767115408/%EC%97%B4%EC%87%A0_auczcb.svg",
        success:
          "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767115408/Group_366_ltgvug.svg",
        error:
          "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767115408/Frame_93_g5lgvw.svg",
        warning:
          "https://res.cloudinary.com/dkqqxjsek/image/upload/v1767186212/%EB%AC%BC%EC%9D%8C%ED%91%9C_lofu9p.svg",
      };

      /* --- 순수 알럿 함수 (버튼 애니메이션 추가) --- */
      function showMyAlert({
        title,
        text,
        iconType = "success",
        input = false,
        cancel = false,
      }) {
        return new Promise((resolve) => {
          document.getElementById("alert-title").textContent = title;
          document.getElementById("alert-text").textContent = text;
          alertIcon.src = ICONS[iconType] || ICONS.success;
          alertInput.style.display = input ? "block" : "none";
          alertInput.value = "";
          const cancelBtn = document.getElementById("alert-cancel");
          cancelBtn.style.display = cancel ? "block" : "none";
          alertOverlay.style.display = "flex";

          const confirmBtn = document.getElementById("alert-confirm");

          const onConfirm = () => {
            confirmBtn.classList.add("animate-bounce");
            setTimeout(() => {
              confirmBtn.classList.remove("animate-bounce");
              alertOverlay.style.display = "none";
              confirmBtn.removeEventListener("click", onConfirm);
              cancelBtn.removeEventListener("click", onCancel);
              resolve({ isConfirmed: true, value: alertInput.value });
            }, 400);
          };

          const onCancel = () => {
            cancelBtn.classList.add("animate-bounce");
            setTimeout(() => {
              cancelBtn.classList.remove("animate-bounce");
              alertOverlay.style.display = "none";
              confirmBtn.removeEventListener("click", onConfirm);
              cancelBtn.removeEventListener("click", onCancel);
              resolve({ isConfirmed: false });
            }, 400);
          };

          confirmBtn.addEventListener("click", onConfirm);
          if (cancel) cancelBtn.addEventListener("click", onCancel);
        });
      }

      class LottiUI {
        constructor(x, y) {
          const div = document.createElement("dotlottie-player");
          div.setAttribute(
            "src",
            "https://lottie.host/dcb52f92-c4c4-413f-b932-8ae17a2b2970/I4W37TF2zG.lottie"
          );
          div.setAttribute("background", "transparent");
          div.setAttribute("speed", "1");
          div.setAttribute("loop", "false");
          div.setAttribute("autoplay", "true");
          div.style.left = x + "px";
          div.style.top = y + "px";
          document.body.append(div);
          setTimeout(() => div.remove(), 3000);
        }
      }

      function openDoor(data, doorElement) {
        doorElement.classList.add("open");
        doorElement.classList.remove("missed", "is-today");
        if (!openedDays.includes(data.day)) {
          openedDays.push(data.day);
          localStorage.setItem("openedDays_Test", JSON.stringify(openedDays));
        }
        showModal(data);
      }

      daysData.forEach((data) => {
        const door = document.createElement("div");
        door.classList.add("door");
        const doorDate = new Date(startDate);
        doorDate.setDate(startDate.getDate() + (data.day - 1));
        const isPast = today > doorDate;
        const isFuture = today < doorDate;
        const isToday = today.getTime() === doorDate.getTime();
        const isOpened = openedDays.includes(data.day);

        if (isToday && !isOpened) door.classList.add("is-today");
        if (isOpened) door.classList.add("open");
        else if (isPast && !isDebugMode) door.classList.add("missed");

        let starHTML_front =
          data.day === 10
            ? `<div class="door-num-10-wrapper"><img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045800/Star_1_wwryei.svg" class="star-icon"><span>10</span></div>`
            : `<span class="door-num">${data.day}</span>`;
        let starHTML_back =
          data.day === 10
            ? `<div class="door-num-10-wrapper"><img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045799/Star_1_1_l9m5ho.svg" class="star-icon"><span>10</span></div>`
            : `<span class="door-num">${data.day}</span>`;

        door.innerHTML = `
          <div class="door-inner">
            <div class="door-front">
              ${starHTML_front}
              <img src="${data.coverImage}" class="cover-image">
              ${
                isPast && !isOpened && !isDebugMode
                  ? `<img src="https://res.cloudinary.com/dkqqxjsek/image/upload/v1767045797/Group_295_tzz6bu.svg" class="lock-overlay">`
                  : ""
              }
            </div>
            <div class="door-back">
              ${starHTML_back}
              <img src="${data.puzzleImage}" class="puzzle-image">
            </div>
          </div>`;

        door.addEventListener("click", async () => {
          if (openedDays.includes(data.day)) {
            showModal(data);
            return;
          }
          if (isPast && !isDebugMode) {
            const res = await showMyAlert({
              title: "",
              text: `Q. ${data.quiz}`,
              iconType: "quiz",
              input: true,
              cancel: true,
            });
            if (res.isConfirmed) {
              if (res.value && res.value.trim() === data.answer) {
                await showMyAlert({
                  title: "정답입니다!",
                  text: "캘린더를 열람할 수 있어요.",
                  iconType: "success",
                });
                openDoor(data, door);
              } else {
                await showMyAlert({
                  title: "땡!",
                  text: "다시 시도해 보세요.",
                  iconType: "error",
                });
              }
            }
            return;
          }
          if (isFuture && !isDebugMode) {
            showMyAlert({
              title: "아직 오픈되지 않았어요!",
              text: `오픈 예정일: ${
                doorDate.getMonth() + 1
              }월 ${doorDate.getDate()}일`,
              iconType: "warning",
            });
            return;
          }
          openDoor(data, door);
        });
        calendarContainer.appendChild(door);
      });

      function showModal(data) {
        const modalDayTitle = document.getElementById("modal-day-title");
        const modalImage = document.getElementById("modal-image");
        modalDayTitle.textContent = `${data.day}일차`;
        document.getElementById("modal-subtext").textContent = data.message;
        modalImage.src = data.contentImage;
        document.getElementById("modal-header-icon").src = data.coverImage;
        const deco = document.getElementById("modal-top-deco");
        deco.src = data.decoImage || "";
        deco.style.display = data.decoImage ? "block" : "none";
        currentImageUrl = data.contentImage;
        modal.classList.add("active");
        new LottiUI(window.innerWidth / 2, window.innerHeight / 2);
        const saveBtn = document.getElementById("save-btn");
        if (data.day === 10) {
          saveBtn.textContent = "연력 받기";
          modalImage.classList.add("vertical");
        } else {
          saveBtn.textContent = "저장하기";
          modalImage.classList.remove("vertical");
        }
      }

      function downloadImage() {
        if (!currentImageUrl) return;
        const link = document.createElement("a");
        link.href = currentImageUrl;
        link.download = `Day_Image`;
        link.target = "_blank";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      const closeModal = () => {
        modal.classList.add("closing");
        setTimeout(() => {
          modal.classList.remove("active", "closing");
        }, 300);
      };

      document
        .getElementById("close-modal-btn")
        .addEventListener("click", () => {
          const btn = document.getElementById("close-modal-btn");
          btn.classList.add("animate-bounce");
          setTimeout(() => {
            btn.classList.remove("animate-bounce");
            closeModal();
          }, 400);
        });

      document.getElementById("save-btn").addEventListener("click", () => {
        const btn = document.getElementById("save-btn");
        btn.classList.add("animate-bounce");
        setTimeout(() => {
          btn.classList.remove("animate-bounce");
          if (
            document.getElementById("modal-day-title").textContent === "10일차"
          )
            window.open("https://twitter.com/OnceUponA4ever", "_blank");
          else downloadImage();
        }, 400);
      });

      document
        .getElementById("help-icon")
        .addEventListener("click", () =>
          document.getElementById("help-modal").classList.add("active")
        );
      document
        .getElementById("help-close-btn")
        .addEventListener("click", () => {
          const btn = document.getElementById("help-close-btn");
          btn.classList.add("animate-bounce");
          setTimeout(() => {
            btn.classList.remove("animate-bounce");
            document.getElementById("help-modal").classList.remove("active");
          }, 400);
        });

      document.getElementById("share-icon").addEventListener("click", () => {
        navigator.clipboard.writeText(window.location.href);
        showMyAlert({
          title: "주소가 복사되었습니다!",
          text: "친구들에게 공유해보세요!",
          iconType: "success",
        });
      });

      window.onclick = (e) => {
        if (e.target === modal) closeModal();
        if (e.target === document.getElementById("help-modal"))
          document.getElementById("help-modal").classList.remove("active");
      };
    </script>
  </body>
</html>
